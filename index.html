<!DOCTYPE html>
<html>
<head>
  <title>Debate App</title>
  <style>
    body {
      background-color: black;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
    }
    #debate, #verdict, #resultDisplay {
      display: none;
      margin-top: 20px;
    }
    textarea {
      width: 80%;
      height: 100px;
      margin: 10px 0;
    }
    .certificate {
      border: 10px solid gold;
      padding: 20px;
      margin: 20px;
      display: inline-block;
      width: 250px;
      border-radius: 10px;
    }
    .loser {
      border-color: silver;
    }
    .tie {
      border-color: gray;
    }
    .ribbon {
      font-size: 20px;
      margin-bottom: 10px;
    }
    .gold { color: gold; }
    .silver { color: silver; }
    .gray { color: gray; }
  </style>
</head>
<body>

  <h1>Debate App</h1>
  <div id="setup">
    <input type="text" id="name1" placeholder="Debater 1"><br><br>
    <input type="text" id="name2" placeholder="Debater 2"><br><br>
    <input type="text" id="topic" placeholder="Debate Topic"><br><br>
    <button onclick="chooseFirst()">Choose</button>
  </div>

  <div id="resultDisplay">
    <h2 id="chosenOne"></h2>
    <button onclick="startDebate()">Start Debate</button>
  </div>

  <div id="debate">
    <h2 id="roundTitle"></h2>
    <h3 id="turnTitle"></h3>
    <p id="timer">Time left: 60 sec</p>
    <textarea id="argumentBox" placeholder="Type your argument here..."></textarea><br>
    <button onclick="nextTurn()">Next Turn</button>
  </div>

  <div id="verdict">
    <h2 id="verdictText"></h2>
    <div id="certificates"></div>
    <button id="continueBtn" style="display:none;" onclick="continueDebate()">Continue Debate</button>
  </div>

<script>
  let names = [];
  let topic = "";
  let turn = 0;
  let currentRound = 1;
  let totalTurns = 0;
  let debateLog = [[], []];
  let timerInterval;
  let timeLeft = 60;
  let extended = false;

  function chooseFirst() {
    const n1 = document.getElementById('name1').value.trim();
    const n2 = document.getElementById('name2').value.trim();
    topic = document.getElementById('topic').value.trim();

    if (!n1 || !n2 || !topic) {
      alert("Please fill in all fields");
      return;
    }

    names = [n1, n2];
    const first = Math.random() < 0.5 ? n1 : n2;
    if (first !== names[0]) names.reverse();

    document.getElementById('setup').style.display = 'none';
    document.getElementById('resultDisplay').style.display = 'block';
    document.getElementById('chosenOne').innerText = `${first} goes first!`;
  }

  function startDebate() {
    document.getElementById('resultDisplay').style.display = 'none';
    document.getElementById('debate').style.display = 'block';
    updateTurn();
    startTimer();
  }

  function updateTurn() {
    const rounds = ["Opening Statements", "Rebuttals", "Final Arguments", "Extra Round"];
    document.getElementById('roundTitle').innerText = `Round ${currentRound}: ${rounds[currentRound - 1]}`;
    document.getElementById('turnTitle').innerText = `${names[turn]}'s turn`;
  }

  function startTimer() {
    timeLeft = 60;
    document.getElementById("timer").innerText = `Time left: ${timeLeft} sec`;
    timerInterval = setInterval(() => {
      timeLeft--;
      document.getElementById("timer").innerText = `Time left: ${timeLeft} sec`;
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        alert(`${names[turn]} ran out of time! ${names[(turn + 1) % 2]} wins!`);
        showVerdict(names[(turn + 1) % 2], names[turn]);
      }
    }, 1000);
  }

  function stopTimer() {
    clearInterval(timerInterval);
  }

  function nextTurn() {
    const argument = document.getElementById('argumentBox').value.trim();
    if (!argument) {
      alert("Please type something.");
      return;
    }
    stopTimer();
    debateLog[turn].push(argument);
    document.getElementById('argumentBox').value = "";
    totalTurns++;

    if ((!extended && totalTurns >= 6) || (extended && totalTurns >= 8)) {
      document.getElementById('debate').style.display = 'none';
      evaluateDebate();
      return;
    }

    turn = (turn + 1) % 2;
    if (totalTurns % 2 === 0) currentRound++;
    updateTurn();
    startTimer();
  }

  function evaluateDebate() {
    const [a, b] = debateLog;
    const isJunk = text => !text || text.length < 10 || /^[a-z]+$/i.test(text);

    const aBad = a.every(isJunk);
    const bBad = b.every(isJunk);

    if (aBad && bBad) {
      showTie();
    } else if (aBad) {
      showVerdict(names[1], names[0]);
    } else if (bBad) {
      showVerdict(names[0], names[1]);
    } else {
      showTie();
    }
  }

  function showVerdict(winner, loser) {
    document.getElementById('verdict').style.display = 'block';
    document.getElementById('verdictText').innerText = `${winner} wins the debate!`;
    document.getElementById('certificates').innerHTML = `
      <div class="certificate">
        <div class="ribbon gold">üèÜ Winner</div>
        <h3>${winner}</h3>
        <p>Debate Topic: ${topic}</p>
      </div>
      <div class="certificate loser">
        <div class="ribbon silver">üéñ Loser</div>
        <h3>${loser}</h3>
        <p>Debate Topic: ${topic}</p>
      </div>`;
  }

  function showTie() {
    document.getElementById('verdict').style.display = 'block';
    document.getElementById('verdictText').innerText = `It's a tie!`;
    document.getElementById('certificates').innerHTML = `
      <div class="certificate tie">
        <div class="ribbon gray">ü§ù Tie</div>
        <h3>${names[0]} & ${names[1]}</h3>
        <p>Debate Topic: ${topic}</p>
      </div>`;
    document.getElementById('continueBtn').style.display = 'inline-block';
  }

  function continueDebate() {
    document.getElementById('verdict').style.display = 'none';
    document.getElementById('debate').style.display = 'block';
    extended = true;
    currentRound = 4;
    totalTurns = 6;
    turn = 0;
    updateTurn();
    startTimer();
  }
</script>

</body>
</html>
